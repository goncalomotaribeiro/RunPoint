<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ex3</title>
</head>
<body>
    email: <input id="txtEmail" type="text"><br>
    password: <input id="txtPassword" type="text"><br>
    <button>ADD</button>

    <script>
        const btnAdd = document.querySelector("button")
        btnAdd.addEventListener("click", function() {
            const txtEmail = document.querySelector("#txtEmail")
            const txtPassword= document.querySelector("#txtPassword")

            class User{
                constructor(email, password){
                    this.email = email
                    this.password = password
                }
            }

            const NewUser = new User(txtEmail.value, txtPassword.value)
            let users = []

            if(localStorage.getItem("Users")) {
                users = JSON.parse(localStorage.getItem("Users"))
            }

            let flag = 0; 
            for (const user of users) { //Percorre o array users
                if(user.email == txtEmail.value){ //E verifica se algum dos users tem um email igual
                    flag = 1;
                }
            }

            if(flag != 1){ //se n√£o tem adiciona
                users.push(NewUser)
            }

            localStorage.setItem("Users", JSON.stringify(users))

        })
    </script>

</body>
</html>